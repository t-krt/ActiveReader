.container
  .flash
    = render partial: "shared/notification"
  .wrapper-book-info.review-show
    .row
      .wrapper-book-info__image.col-sm-5
        - if @book.image_url.present?
          = image_tag @book.image_url, size: "350x350", alt: "書影"
        - else
          = image_tag asset_path("no_image.jpg")
      .col-sm-7
        .wrapper-book-info__right
          .badge.badge-info.badge-pill
            タイトル
          = @book.title
        .wrapper-book-info__right
          .badge.badge-info.badge-pill
            著者
          = @book.author
        .wrapper-book-info__right
          .badge.badge-info.badge-pill
            登録日
          = @review.created_at.strftime("%Y/%m/%d")
        .rate{id: "star-rate-#{@review.id}"}
        .wrapper-book-info__icon.float-right
          - if user_signed_in? && @review.user_id == current_user.id
            = link_to edit_review_path(@review) do
              %i.fas.fa-edit.fa-lg.icon-color
            = link_to "/reviews/#{@review.id}", method: :delete, data: { confirm: "本当に削除しますか？" } do
              %i.fas.fa-trash-alt.fa-lg.icon-color
          = link_to "#{@book.url}" do
            %i.fas.fa-info-circle.fa-lg.icon-color
    .card.review-show__contents
      .card-header 読書の目的
      .card-body.review-show__contents__list 
        = @review.purpose
      .card-header 学んだこと
      .card-body.review-show__contents__list 
        - if @review.learned.present?
          = @review.learned
        - else
          .review-show__contents__list--no-entry 「学んだこと」は未記入です。
      - if user_signed_in? && @review.user_id == current_user.id
        .card-header 
          読書メモ
          %span.wrapper-book-info--notice （※あなたにしか見えていません）
        .card-body.review-show__contents__list 
          - if @review.note.present?
            = @review.note 
          - else
            .review-show__contents__list--no-entry 「読書メモ」は未記入です。
        .card-header 
          -# review_idがtasks_controllerのset_reviewメソッドで必要になるため、パラメータをtasks#newに渡す
          = link_to new_task_path(params: {review_id: @review.id}), remote: true do 
            .i.fas.fa-plus-square.add-task-btn
          TODOを追加する
          #todoModal.modal{"aria-hidden": "true", "aria-labelledby": "exampleModalLabel", role: "dialog", tabindex: "-1"}
          %span.wrapper-book-info--notice （※あなたにしか見えていません）
        .card-body.review-show__contents__list 
          = render 'shared/task-list'
:erb
  <script>
    $('#star-rate-<%= @review.id %>').raty({
      size: 36,
      starOff:  '<%= asset_path('star-off.png') %>',
      starOn : '<%= asset_path('star-on.png') %>',
      starHalf: '<%= asset_path('star-half.png') %>',
      readOnly: true,
      score: <%= @review.rate %>
    });
  </script>
  